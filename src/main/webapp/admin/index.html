<!DOCTYPE html>
<html>

<head>
	<title>GROOT  (CNR)</title>
	<link rel="stylesheet" type="text/css" href="adminStyleUsable.css">
	<link rel="stylesheet" type="text/css" href="nicepage.css">
	<script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
</head>

<body>
	<header>
		<h1>GROOT :: GdpR-based cOmbinatOrial Testing</h1>
	</header>
	<nav>
		<ul>
			<li><a href="#home" id="home">Home</a></li>
			<li><a href="#upload" id="upload-ontology">Upload</a></li>
			<li><a href="#navigate" id="navigate-ontology">Navigate</a></li>
			<li><a href="#delete" id="delete-ontology">Delete</a></li>
			<li><a href="#update" id="update-ontology">Update</a></li>
			<li><a href="#sosBlockly" id="map-sos-blockly-ontology">Map SoS Blockly Profile</a></li>
		</ul>
	</nav>
	<main>
		<section id="home-section">
			<h2>Welcome to the Ontology Manager Administrator</h2>
			<p>Use the menu above to navigate the various functionality available in the Ontology Manager tool.</p>
		
		
			<div class="u-expanded-width u-tab-links-align-left u-tabs u-tabs-1">
				<ul class="u-spacing-10 u-tab-list u-unstyled" role="tablist">
				  <li class="u-tab-item u-tab-item-1" role="presentation">
					<a class="active u-active-grey-10 u-button-style u-tab-link u-text-active-black u-text-black u-tab-link-1" id="link-tab-14b7" href="#tab-14b7" role="tab" aria-controls="tab-14b7" aria-selected="true">Load AC Policy</a>
				  </li>
				  <li class="u-tab-item u-tab-item-2" role="presentation">
					<a class="u-active-grey-10 u-button-style u-tab-link u-text-active-black u-text-black u-tab-link-2" id="link-tab-0da5" href="#tab-0da5" role="tab" aria-controls="tab-0da5" aria-selected="false">Generate AC Requests</a>
				  </li>
				  <li class="u-tab-item" role="presentation">
					<a class="u-active-grey-10 u-button-style u-tab-link u-text-active-black u-text-black u-tab-link-3" id="link-tab-2917" href="#tab-2917" role="tab" aria-controls="tab-2917" aria-selected="false">Oracle&nbsp;</a>
				  </li>
				  <li class="u-tab-item u-tab-item-4" role="presentation">
					<a class="u-active-grey-10 u-button-style u-tab-link u-text-active-black u-text-black u-tab-link-4" id="tab-6e5a" href="#link-tab-6e5a" role="tab" aria-controls="link-tab-6e5a" aria-selected="false">Evaluate AC Requests</a>
				  </li>
				</ul>
				<div class="u-tab-content">
				  <div class="u-align-left u-container-style u-grey-10 u-tab-active u-tab-pane u-tab-pane-1" id="tab-14b7" role="tabpanel" aria-labelledby="link-tab-14b7">
					<div class="u-container-layout u-container-layout-1">
					  <h5 class="u-text u-text-1">lOAD XACML pOLICY</h5>
					  <div class="u-border-3 u-border-grey-dark-1 u-expanded-width u-line u-line-horizontal u-line-1"></div>
					</div>
				  </div>
				  <div class="u-container-style u-grey-10 u-tab-pane u-tab-pane-2" id="tab-0da5" role="tabpanel" aria-labelledby="link-tab-0da5">
					<div class="u-container-layout u-valign-top u-container-layout-2">
					  <h5 class="u-text u-text-default u-text-2">International Shipping &amp; Duty Charges</h5>
					  <div class="u-border-3 u-border-grey-dark-1 u-expanded-width u-line u-line-horizontal u-line-2"></div>
					  <p class="u-text u-text-3">Sample text. Click to select the text box. Click again or double click to start editing the text. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
					</div>
				  </div>
				  <div class="u-container-style u-grey-10 u-tab-pane u-tab-pane-3" id="tab-2917" role="tabpanel" aria-labelledby="link-tab-2917">
					<div class="u-container-layout u-container-layout-3">
					  <h4 class="u-text u-text-default u-text-4">Oracle Derivation for Each AC Request</h4>
					  <p class="u-text u-text-default u-text-5">Sample text. Click to select the text box. Click again or double click to start editing the text.</p>
					  <a href="" class="u-btn u-button-style u-btn-1">write product review</a>
					</div>
				  </div>
				  <div class="u-container-style u-grey-10 u-tab-pane u-tab-pane-4" id="link-tab-6e5a" role="tabpanel" aria-labelledby="tab-6e5a">
					<div class="u-container-layout u-container-layout-4">
					  <p class="u-text u-text-default u-text-6">Sample text. Click to select the text box. Click again or double click to start editing the text. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
					  <a href="" class="u-btn u-button-style u-btn-2"><span class="u-icon"><svg class="u-svg-content" viewBox="0 0 512 512" x="0px" y="0px" style="width: 1em; height: 1em;"><g><g><g><path d="M491.422,138.859c-13.008-26.609-32.129-49.151-56.831-66.999C390.803,40.221,329.047,23.5,256,23.5     S121.197,40.221,77.409,71.859c-24.702,17.848-43.823,40.39-56.831,66.999C6.924,166.791,0,199.305,0,235.5     c0,78.285,32.285,138.172,93.614,174.195c-8.483,29.931-19.492,48.07-19.591,48.231l-18.984,30.521l35.956,0.053H91.1     c0.104,0.001,0.208,0.001,0.319,0.001c11.347,0,63.406-2.448,105.735-44.91c18.66,2.596,38.403,3.909,58.846,3.909     c73.047,0,134.803-16.723,178.591-48.36c24.702-17.848,43.823-40.39,56.831-66.999C505.076,304.208,512,271.693,512,235.5     C512,199.305,505.076,166.791,491.422,138.859z M411.164,366.716C374.237,393.396,320.583,407.5,256,407.5     c-22.19,0-43.364-1.686-62.935-5.009l-11.135-1.891l-7.369,8.559c-15.834,18.391-34.114,28.21-49.632,33.439     c4.03-10.872,8.111-23.919,11.404-38.786l3.394-15.32l-14.072-6.941C68.818,353.515,40,304.375,40,235.5     c0-57.903,20.468-102.051,60.836-131.217C137.763,77.602,191.417,63.5,256,63.5s118.237,14.103,155.164,40.783     C451.532,133.448,472,177.596,472,235.5S451.532,337.549,411.164,366.716z"></path><rect x="236" y="327.5" width="40" height="40"></rect><path d="M264.01,105.994c-22.998-2.518-45.895,4.748-62.838,19.936C184.539,140.839,175,162.187,175,184.5h40     c0-11.122,4.571-21.346,12.871-28.786c8.616-7.724,19.905-11.261,31.781-9.958c18.319,2.008,33.077,16.6,35.093,34.699     c1.622,14.574-4.888,28.78-16.991,37.072C250.983,235.87,235,265.766,235,297.5h40c0-18.534,9.481-36.094,25.363-46.975     c24.317-16.662,37.397-45.207,34.136-74.497C330.429,139.477,300.784,110.023,264.01,105.994z"></path>
	  </g>
	  </g>
	  </g></svg><img></span>&nbsp;ask a question 
					  </a>
					</div>
				  </div>
				</div>
			  </div>
		
		
		
		</section>

		<!-- For UPLOADING Ontology -->
		<section id="upload-section">
			<h2>Upload</h2>
			<p>This is the section for uploading the ontology database file.</p>

			<div class="container">
				<form id="form" action="http://localhost:8282/ontologymanager/biecointerface/" method="post">
					<div class="form-control">
						<label for="file-input">Select a file:</label>
						<input type="file" id="file-input" name="file">
					</div>
					<div class="form-control">
						<label>File content:</label>
						<pre id="file-content"></pre>
					</div>
					<button type="submit" class="btn">Submit</button>
				</form>
			</div>


			<script>
				const form = document.getElementById('form');
				const fileInput = document.getElementById('file-input');
				const fileContent = document.getElementById('file-content');

				fileInput.addEventListener('change', (event) => {
					const file = event.target.files[0];
					const reader = new FileReader();
					reader.onload = (event) => {
						fileContent.textContent = event.target.result;
					};
					reader.readAsText(file);
				});

				form.addEventListener('submit', (event) => {
					event.preventDefault();
					const file = fileInput.files[0];
					const reader = new FileReader();
					reader.onload = (event) => {
						const content = event.target.result;
						fileContent.textContent = content;
						const xhr = new XMLHttpRequest();
						xhr.open('POST', 'http://localhost:8282/ontologymanager/biecointerface/', true);
						xhr.setRequestHeader('Content-Type', 'application/json');
						xhr.setRequestHeader('Authorization', 'qJACs1J0apruOOJCg');
						xhr.onload = function () {
							if (xhr.status === 200) {
								status.textContent = 'Upload successful!';
							} else {
								status.textContent = 'Upload failed: ' + xhr.status;
							}
						};
						const data = {
							jobID: '1234',
							timestamp: '',
							messageType: 'Data',
							sourceID: '4',
							event: {
								OntologyRequest: {
									operationName: 'uploadontology',
									ontologyContent: content
								}
							},
							crc: 1234567
						};
						xhr.send(JSON.stringify(data));
					};
					reader.readAsText(file);
				});
			</script>
		</section>





		<!-- For NAVIGATING Ontology -->

		<section id="navigate-section">
			<h2>Navigate</h2>
			<p>This is the section for navigating the ontology and selecting Monitoring Rules.</p>


			<h1>Select a System of Systems</h1>
			<select id="sos-selector">
			</select>

			<h1>Select a Device</h1>
			<select id="device-selector">
			</select>

			<h1>Select a Component</h1>
			<select id="component-selector">
			</select>

			<h1>Select a Skill</h1>
			<select id="skill-selector">
			</select>

			<h1>Select a Rule</h1>
			<select id="rule-selector">
			</select>

			<h1>Log Area</h1>
			<!-- 
			<div id="logArea"> Ontology Log</div>
			-->
			<div id="logArea"
				style="background-color: #f5f5f5; color: #555; font-size: 14px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 10px; border: 1px solid #ccc; border-radius: 5px; white-space: pre-wrap;">
			</div>



			<script>


				function resetSelectorsRSCD() {
					deviceSelectEl.value = '';
					componentSelectEl.value = '';
					skillSelectEl.value = '';
					ruleSelectEl.value = '';
				}
				function resetSelectorsRSC() {
					componentSelectEl.value = '';
					skillSelectEl.value = '';
					ruleSelectEl.value = '';
				}
				function resetSelectorsRS() {
					skillSelectEl.value = '';
					ruleSelectEl.value = '';
				}
				function resetSelectorsR() {
					ruleSelectEl.value = '';
				}

				function resetSelectors(level = 'RSCD') {
					switch (level) {
						case 'RSCD':
							deviceSelectEl.value = '';
						case 'SCD':
							componentSelectEl.value = '';
						case 'SD':
							skillSelectEl.value = '';
						case 'R':
							ruleSelectEl.value = '';
					}
				}

				const sosSelectEl = document.getElementById('sos-selector');
				const deviceSelectEl = document.getElementById('device-selector');
				const componentSelectEl = document.getElementById('component-selector');
				const skillSelectEl = document.getElementById('skill-selector');
				const ruleSelectEl = document.getElementById('rule-selector');



				fetchData('getsoss', 'sosId', 'sosName', sosSelectEl);

				sosSelectEl.addEventListener('change', () => {
					fetchData('getdevices', 'deviceId', 'deviceName', deviceSelectEl, 'sosId', sosSelectEl.value);
					resetSelectorsRSCD();
				});

				deviceSelectEl.addEventListener('change', () => {
					fetchData('getcomponents', 'componentId', 'componentName', componentSelectEl, 'sosId', sosSelectEl.value, 'deviceId', deviceSelectEl.value);
					resetSelectorsRSC();
				});

				componentSelectEl.addEventListener('change', () => {
					fetchData('getskills', 'skillId', 'skillName', skillSelectEl, 'sosId', sosSelectEl.value, 'deviceId', deviceSelectEl.value, 'componentId', componentSelectEl.value);
					resetSelectorsRS();
				});


				skillSelectEl.addEventListener('change', () => {
					fetchData('getrules', 'ruleId', 'ruleName', ruleSelectEl, 'sosId', sosSelectEl.value, 'deviceId', deviceSelectEl.value, 'componentId', componentSelectEl.value, "skillId", skillSelectEl.value);
					resetSelectorsR();
				});



				function fetchData(operationName, valueKey, textKey, selectEl, ...args) {
					const logArea = document.getElementById('logArea');

					const payload = {
						jobID: '1234',
						timestamp: '',
						messageType: 'Data',
						sourceID: '4',
						event: {
							OntologyRequest: {
								operationName
							}
						},
						crc: 1234567
					};

					if (args.length % 2 !== 0) {
						console.error('Invalid number of arguments');
						return;
					}

					for (let i = 0; i < args.length; i += 2) {
						payload.event.OntologyRequest[args[i]] = args[i + 1];
					}

					fetch('http://localhost:8282/ontologymanager/biecointerface/', {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json',
							'Authorization': 'qJACs1J0apruOOJCg'
						},
						body: JSON.stringify(payload)
					})
						.then(response => response.json())
						.then(data => {
							// Remove previous options from the select element
							selectEl.innerHTML = '';

							// Concatenate payload and data and log in logArea
							const logData = {
								OM_Request: payload,
								OM_Response: data
							};

							logArea.innerText = JSON.stringify(logData, null, 2);


							// Add options to the select element
							data.forEach(item => {
								const optionEl = document.createElement('option');
								optionEl.value = item[valueKey];
								optionEl.text = item[textKey];
								selectEl.appendChild(optionEl);
							});
						})
						.catch(error => console.error(error));
				}


			</script>




		</section>
		<section id="delete-section">
			<h2>Delete</h2>
			<p>This is the section for deleting ontologies. </p>



		</section>



		<section id="update-section">
			<h2>Update</h2>
			<p>This is the section for updating ontologies.</p>


			<form>
				<h2>System of Systems</h2>
				<label for="sos-name">Name:</label>
				<input type="text" id="sos-name" name="sos-name" required>
				<button type="button" onclick="addSos()">Add</button>
				<button type="button" onclick="modifySos()">Modify</button>

				<h2>Device</h2>
				<label for="device-name">Name:</label>
				<input type="text" id="device-name" name="device-name" required>
				<label for="sos-selector">System of Systems:</label>
				<select id="sos-selector" required>
				</select>
				<button type="button" onclick="addDevice()">Add</button>
				<button type="button" onclick="modifyDevice()">Modify</button>

				<h2>Component</h2>
				<label for="component-name">Name:</label>
				<input type="text" id="component-name" name="component-name" required>
				<label for="device-selector">Device:</label>
				<select id="device-selector" required>
				</select>
				<button type="button" onclick="addComponent()">Add</button>
				<button type="button" onclick="modifyComponent()">Modify</button>

				<h2>Skill</h2>
				<label for="skill-name">Name:</label>
				<input type="text" id="skill-name" name="skill-name" required>
				<label for="component-selector">Component:</label>
				<select id="component-selector" required>
				</select>
				<button type="button" onclick="addSkill()">Add</button>
				<button type="button" onclick="modifySkill()">Modify</button>

				<h2>Rule</h2>
				<label for="rule-name">Name:</label>
				<input type="text" id="rule-name" name="rule-name" required>
				<label for="skill-selector">Skill:</label>
				<select id="skill-selector" required>
				</select>
				<button type="button" onclick="addRule()">Add</button>
				<button type="button" onclick="modifyRule()">Modify</button>
			</form>
		</section>
		
		<section id="map-sos-blockly-section">
			<h2>Map SoS Blockly Profile</h2>
			
			
			<p>Use this functionality for importing and mapping the AMADEOS SoS profile using Blockly4SoS to the DEAMON Ontology.
			Please Upload the .ecore file exported from Blockly4SoS.</p>




			<div id='skills-section'>
				<!-- solito container -->
				<div class="container">
					<h3>I miei servizi</h3>
					<div id='skills'>
						<div class="skill">
							<h4>Web design</h4>
							<p>Lorem</p>
						</div>
						<div class="skill">
							<h4>Web marketing</h4>
							<p>Lorem</p>
						</div>
						<div class="skill">
							<h4>Branding</h4>
							<p>Lorem</p>
						</div>
					</div>
				</div>
			</div>
			


				<h2>Map AMADEOS SoS profile using Blockly4SoS to the DEAMON Ontology</h2>
				<p>Select a file to import and map the AMADEOS SoS profile using Blockly4SoS to the DEAMON Ontology.</p>
			  
				<div class="container">
					<div class="row d-flex justify-content-between">
					  <div class="col-md-6">
						<h3>Imported/Loaded File</h3>
						<div class="form-control">
						  <label for="imported-file">Selected file:</label>
						  <input type="file" id="imported-file" name="imported-file">
						</div>
						<div class="form-control">
						  <label>File content:</label>
						  <pre id="imported-file-content"></pre>
						</div>
						<button id="upload-file" type="button" class="btn">Upload File</button>
					  </div>
					  <div class="col-md-6">
						<h3>Analysis Result</h3>
						<div class="form-control">
						  <label for="analysis-result">Result of analysis:</label>
						  <textarea id="analysis-result" name="analysis-result"></textarea>
						</div>
						<button id="upload-content" type="button" class="btn">Upload Content</button>
					  </div>
					</div>
				  </div>

				<script>
				  const importedFileInput = document.getElementById('imported-file');
				  const importedFileContent = document.getElementById('imported-file-content');
				  const analysisResult = document.getElementById('analysis-result');
			  
				  importedFileInput.addEventListener('change', (event) => {
					const file = event.target.files[0];
					const reader = new FileReader();
					reader.onload = (event) => {
					  importedFileContent.textContent = event.target.result;
					};
					reader.readAsText(file);
				  });
			  
				  function analyzeImportedFile() {
					// Analyze the imported file and update the analysisResult textarea
					// with the result of the analysis.
					// ...
				  }
			  
				  function uploadFile() {
					// Upload the selected file to the server.
					// ...
				  }
			  
				  function uploadContent() {
					// Upload the content of the imported file preview area or the analysis result
					// preview area to the server.
					// ...
				  }
			  
				  document.getElementById('upload-file').addEventListener('click', uploadFile);
				  document.getElementById('upload-content').addEventListener('click', uploadContent);
				</script>
			  














		</section>
		
	</main>
	<script>
		// Get menu links and sections
		const homeLink = document.getElementById('home');
		const homeSection = document.getElementById('home-section');
		const uploadLink = document.getElementById('upload-ontology');
		const uploadSection = document.getElementById('upload-section');
		const navigateLink = document.getElementById('navigate-ontology');
		const navigateSection = document.getElementById('navigate-section');
		const deleteLink = document.getElementById('delete-ontology');
		const deleteSection = document.getElementById('delete-section');
		const updateLink = document.getElementById('update-ontology');
		const updateSection = document.getElementById('update-section');
		
		const mappingSoSblocklyLink = document.getElementById('map-sos-blockly-ontology');
		const mappingSoSblocklySection = document.getElementById('map-sos-blockly-section');

		// Hide all sections except the home section on page load
		uploadSection.style.display = 'none';
		navigateSection.style.display = 'none';
		deleteSection.style.display = 'none';
		updateSection.style.display = 'none';
		mappingSoSblocklySection.style.display = 'none';

		// Add event listeners to menu links to show their respective sections
		homeLink.addEventListener('click', () => {
			homeSection.style.display = 'block';
			uploadSection.style.display = 'none';
			navigateSection.style.display = 'none';
			deleteSection.style.display = 'none';
			updateSection.style.display = 'none';
			mappingSoSblocklySection.style.display = 'none';
		});

		uploadLink.addEventListener('click', () => {
			homeSection.style.display = 'none';
			uploadSection.style.display = 'block';
			navigateSection.style.display = 'none';
			deleteSection.style.display = 'none';
			updateSection.style.display = 'none';
			mappingSoSblocklySection.style.display = 'none';
		});

		navigateLink.addEventListener('click', () => {
			homeSection.style.display = 'none';
			uploadSection.style.display = 'none';
			navigateSection.style.display = 'block';
			deleteSection.style.display = 'none';
			updateSection.style.display = 'none';
			mappingSoSblocklySection.style.display = 'none';
		});

		deleteLink.addEventListener('click', () => {
			homeSection.style.display = 'none';
			uploadSection.style.display = 'none';
			navigateSection.style.display = 'none';
			deleteSection.style.display = 'block';
			updateSection.style.display = 'none';
			mappingSoSblocklySection.style.display = 'none';
		});

		updateLink.addEventListener('click', () => {
			homeSection.style.display = 'none';
			uploadSection.style.display = 'none';
			navigateSection.style.display = 'none';
			deleteSection.style.display = 'none';
			updateSection.style.display = 'block';
			mappingSoSblocklySection.style.display = 'none';
		});
		
		mappingSoSblocklyLink.addEventListener('click', () => {
			homeSection.style.display = 'none';
			uploadSection.style.display = 'none';
			navigateSection.style.display = 'none';
			deleteSection.style.display = 'none';
			updateSection.style.display = 'none';
			mappingSoSblocklySection.style.display = 'block';
		});
	</script>
</body>

</html>